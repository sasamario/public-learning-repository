# システムの構成

[システム構成要素 システムの構成](https://www.ap-siken.com/index_te.html#4_1)

## ★ 信頼設計　よく出る！！！　過去 10 問以上は出ている

各単語の意味をそれぞれ押さえておくこと（基本選択肢でどれが正しいかを選ぶため、どれも理解しておくこと）

### フォールトトレラント

フォールトトレラントは、壊れないようにするという考え方ではなく、「壊れても大丈夫なように」対策をする考え方。  
フォールトトレラントを実現する方法は以下のものがある。

- フェールセーフ：故障が発生したら、安全優先とする
  - 例：故障すると赤の状態で停止する信号、倒れると自動で火が消える石油ストーブ
- フェールソフト：故障が発生した場合、システム全体を停止させるのではなく縮小してでも継続を図る
  - 例：ジェット機のエンジンが片方壊れても飛ぶことができる
- フールプール：意図しない使い方をしても故障しないようにする
  - 例：電子レンジのドアを閉めないと加熱できない、電池の向きが合っていないと入らない電池ボックス

また、フォールトトレラントとは異なり「故障そのものの発生を防ぐ(故障自体の発生率を下げる)」という考え方が、フォールトアボイダンスという。

■ 参考過去問  
・[システム信頼設計 R6 春 12, R4 秋 13, R3 春 13, H27 秋 14](https://www.ap-siken.com/kakomon/06_haru/q12.html)  
・[信頼性を高める技術 R5 春 15](https://www.ap-siken.com/kakomon/05_haru/q15.html)  
・[インターロックの例はどれか](https://www.ap-siken.com/kakomon/03_aki/q13.html)  
・[システムの信頼性向上技術 R1 秋 16, H27 春 14, H25 春 15, H22 秋 16](https://www.ap-siken.com/kakomon/01_aki/q16.html)  
・[フェールソフトの説明はどれか](https://www.ap-siken.com/kakomon/30_haru/q15.html)  
・[フェールセーフの考え方 H28 春 16, H25 秋 16, H21 秋 15](https://www.ap-siken.com/kakomon/28_haru/q16.html)

## ★ システムのスケール増強・縮小　よく出る！！！

システムの能力を増強する方法として、「スケールアウト」「スケールアップ」。縮小する方法として「スケールイン」「スケールダウン」がある。  
何を増減するかが違う。

- スケールアウト：物理サーバの台数を増やして処理能力 UP
- スケールイン：物理サーバの台数を減らして処理能力 DOWN
- スケールアップ：CPU やメモリの能力を上げて処理能力 UP
- スケールダウン：CPU やメモリの能力を下げて処理能力 DOWN

スケールアップは、サーバを構成する処理装置の性能を上げることで処理能力を向上させる。追加・削除・更新処理が頻繁に発生するなど並列実行による負荷分散が困難なシステムに適している。  
（スケールアウトのような物理サーバの台数を増やす対応だと、データの生合成を維持するための処理や排他制御による遅延など性能の向上につながらないため向いていない）

スケールアウトが適しているのは、更新処理の生合成要件が緩く、ここに独立して並列実行できる処理を扱うシステム。

■ 参考過去問  
・[スケールアウトが適しているシステム R5 秋 13, R1 秋 13, ](https://www.ap-siken.com/kakomon/05_aki/q13.html)  
・[スケールインの説明はどれか](https://www.ap-siken.com/kakomon/05_haru/q13.html)  
・[スケールインの説明はどれか R3 秋 12](https://www.ap-siken.com/kakomon/03_aki/q12.html)  
・[スケールアウトに関する記述はどれか H30 春 14, H27 春 12](https://www.ap-siken.com/kakomon/30_haru/q14.html)

## ★ ストアドプロシージャ　よく出る！！！　過去 10 問程度出題されている

ストアドプロシージャは、データベースを操作する一連の処理手順（SQL）を一つのプログラムにまとめ、データベース管理システム（DBMS）側にあらかじめ保存しておくこと。

■ メリット  
・まとめてリクエストできるため、ネットワーク負荷が軽減できる  
・複雑な処理の標準化、共有化ができる  
・プロシージャは SQL 文の解析も済ませた即実行可能な形式のため、処理速度の向上が見込める  
・機密性の高いデータに対する処理を特定のストアド呼び出しに限定することで、セキュリティを向上させることができる

※なお、まとめてリクエストできるが DBMS がデータベースに発行するクエリ数が減るわけではない点注意。

■ 参考過去問  
・[ストアドプロシージャの利点 R6 春 25, H29 秋 26, H24 秋 25, H19 春 69](https://www.ap-siken.com/kakomon/06_haru/q25.html)  
・[ストアドプロシージャ H27 秋 26, H25 秋 27, H21 春 31](https://www.ap-siken.com/kakomon/27_aki/q26.html)  
・[ストアドプロシージャの利点 H25 春 27, H20 秋 68](https://www.ap-siken.com/kakomon/25_haru/q27.html)  
・[ストアドプロシージャの特徴](https://www.ap-siken.com/kakomon/19_aki/q69.html)  
・[ストアドプロシージャの効果](https://www.ap-siken.com/kakomon/17_haru/q28.html)

## ★3 層クライアントサーバシステム　よく出る！！！　過去 10 問程度出題されている

クライアントサーバシステム（client-server system:C/S）は、サービスを要求する側であるクライアントと、サービスを提供するサーバに分離した形態。  
その中でも 3 層クライアントサーバシステムでは、以下の 3 層に機能を分離したモデル。

- プレゼンテーション層（クライアント側）：Web ブラウザ
- ファンクション層（サーバ側）：アプリケーションサーバ
- データ層（サーバ側）：データベースサーバ

■ 参考過去問  
・[3 層アーキテクチャを説明したもの H28 春 12, H18 春 29](https://www.ap-siken.com/kakomon/28_haru/q12.html)  
・[3 層クライアントサーバシステム H26 秋 11](https://www.ap-siken.com/kakomon/26_aki/q11.html)  
・[3 層クライアントサーバシステム H26 春 12, H20 春 28](https://www.ap-siken.com/kakomon/26_haru/q12.html)  
・[3 層 C/S における各層の役割](https://www.ap-siken.com/kakomon/25_haru/q13.html)  
・[3 層 Web システム](https://www.ap-siken.com/kakomon/23_toku/q15.html)  
・[3 層 C/S の特徴](https://www.ap-siken.com/kakomon/19_haru/q29.html)  
・[3 層 C/S システムの中間層](https://www.ap-siken.com/kakomon/17_aki/q29.html)

## ★RAID 　よく出る！！！　過去 10 問程度出題されている

RAID とは、複数のハードディスクを組み合わせて、データの冗長性（耐障害性）やパフォーマンス向上を実現するための技術。  
RAID には、RAID0 から RAID6 までの 7 種類に分かれている。

RAID の中で一般的に使われているのは以下の 3 つ。最低限この 3 つを押さえておけば大体解ける（過去問を見た感じ）

- RAID0（ストライピング）：一つのデータを 2 台以上のディスクに分散して書き込みを行う
  - メリット：高速化が図れる
  - デメリット：1 台でも故障するとデータが失われるので信頼性が低い
- RAID1（ミラーリング）：同じデータを 2 台以上のディスクに書き込みを行う
  - メリット：いずれか 1 台故障してもそのまま使えるため信頼性が高い
  - デメリット：使えるディスク領域は半分
- RAID5：3 台以上のディスクを使って、データと同時にパリティ（誤り訂正データ）も分散させて書き込みを行う。パリティの容量はディスクに関係なく常にディスク 1 台分要する。
  - メリット：1 台のディスクが故障してもデータ復旧可能（パリティを使うことで、排他的論理和によりデータの復旧が可能。ただ、2 台壊れた場合は復旧不可）
  - デメリット：計算処理が発生するため、書き込みが若干遅い

■ 参考過去問  
・[RAID5 の実行データ容量 R4 春 11, H19 秋 21](https://www.ap-siken.com/kakomon/04_haru/q11.html)  
・[RAID1〜5 の各構成の区別 H27 春 11, H23 特 13](https://www.ap-siken.com/kakomon/27_haru/q11.html)  
・[RAID の種類 H26 春 11, H22 春 12](https://www.ap-siken.com/kakomon/26_haru/q11.html)  
・[RAID0 と RAID1 の同時編成](https://www.ap-siken.com/kakomon/25_aki/q13.html)  
・[RAID の分類 H24 春 14, H20 春 19](https://www.ap-siken.com/kakomon/24_haru/q14.html)  
・[ストライピング](https://www.ap-siken.com/kakomon/19_haru/q20.html)  
・[性能向上だけを目的とした RAID](https://www.ap-siken.com/kakomon/17_haru/q48.html)

## システムを止めない工夫

障害発生時もシステムを止めない工夫をすることが重要。  
信頼性を高める手法として以下のものがある。

- デュアルシステム：同じ構成で常時処理を行うシステムを 2 組用意する（処理結果はお互いに検証する）
- デュプレックスシステム：同じ構成でシステムを用意するが、正常運転中は片方のシステムは待機（待機中は他の処理を行ったりする）
  - ホットスタンバイ：いざという時に瞬時に切り替えられる待機方法。その分コストがかかる
  - コールドスタンバイ：通常時は別の処理をしたり電源がオフで、いざという時に切り替えを行う方法。電源の立ち上げや処理の引き継ぎなどで瞬時に切り替えができないがコストダウンができる

ホットスタンバイは、障害発生時にすぐに切り替えができるようにサーバ同士で定期的に情報交換を行い、サーバダウンを自律的に検出するようになっている。  
例）ヘルスチェック（待機系のサーバから現用系にパケットを送り、適切な応答が得られるかで判断を行う）

■ 参考過去問  
・[Web アプリケーションサーバの信頼性](https://www.ap-siken.com/kakomon/06_aki/q12.html)  
・[待機系に切り替わる契機](https://www.ap-siken.com/kakomon/04_haru/q13.html)  
・[ホットスタンバイ方式](https://www.ap-siken.com/kakomon/23_aki/q15.html)

## シンプロビジョニング（ストレージ技術）

シンプロビジョニング（Thin Provisioning）は、ハードディスク装置などの外部記憶装置群を仮想化することで、物理的な記憶容量より多くの容量を利用者に割り当てることを可能にする仕組み。  
物理ディスク容量として割り当てると、未使用の物理ディスク領域が多くなり無駄が生じる（データの割り当て時にディスク確保のために該当容量を確保するため）。  
シンプロビジョニングでは、今後利用する予定の最大容量を割り当てておき、実際の内部では使った分だけの物理容量を割り当てるため無駄がなくなり、効率的に使うことができる。

■ 参考過去問  
・[シンプロビジョニングはどれか H30 秋 11, H26 秋 10](https://www.ap-siken.com/kakomon/30_aki/q11.html)
