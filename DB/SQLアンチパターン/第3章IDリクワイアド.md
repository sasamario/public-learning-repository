# 第3章IDリクワイアド（とりあえずID） p33〜42
以下記事はこの章について図で説明していてイメージがつきやすい
- [【SQLアンチパターン】IDリクワイド（とりあえずID）について](https://note.com/standenglish/n/n754149e7533a

## アンチパターン発生の背景
すべてのテーブルに「id」列を定義している

## アンチパターンによる影響
- 主キー本来の役割を果たさない場面がある
	- とりあえずidカラムを主キーとして定義という考えだと、本来あるべき主キーの役割（テーブルの全ての行が一意）が適切に果たせない
	- 例）交差テーブルで重複を防ぐことができないとか（この場合UNIQUE制約を使うことになるが、その場合idカラムが不要になる）
- 冗長なカラム
	- 意味のない主キー「id」があっても、他のカラムで自然な主キーを用意できる場合は「id」が意味のないカラムとなってしまう
- キーの意味がわからない
	- idというカラムが多数存在することになり、何のためのカラムなのかわかりにくくなる
- 結合時にUSING句が使えない（詳しくはp38）
	- 同じ名称のカラムであれば結合時にUSING句が使えるが、全てのテーブルの主キーをidとしてしまうと外部キーでは別の名称を付ける必要が出てきて、結果USING句が使えない（カラムの名称が同じではないため）


## 解決策
- わかりやすい命名を心がける
	- 考えずに「id」と命名するのではなく、「article_id」のようにわかりやすい命名をする


また、アンチパターンを許容できるパターンとしてORMを使用している場合などの**設定より規約を重視する**時。  
ORMの場合、全てのテーブルで同じように主キーを定義する場合がある。そういった場合はその規約に従うのもあり。  
ただ、絡む名を自分で設定することもできるのでそこは臨機応変に対応すると良い（規約に従うのか、ちゃんと命名するルールにするのか）。

# 不明点調査
## 擬似キー（代理キー）とは
主キーの一種。ビジネスロジックに直接関与しない意味のない値を使用する手法。  
テーブル中に主キーとなりうる列（自然キーともいう）がない場合、便宜的に行を一意にするためのキーのこと。  
代理キーとも呼ばれる。


■参考
- [【DB設計】そのID列は本当に必要か？テーブルにとりあえずIDカラムを作ってはいけない。](https://bbh.bz/2020/07/20/pseudo-key-natural-key/)

## 複合キーとは
複数のカラムを組み合わせることで主キーとしたもの。  
一つのカラムではデータが一意に識別ができなくでも、複数カラムで一意と識別することができる。
